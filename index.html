<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Machine Inventory</title>
    <link rel="shortcut icon" href="#"><!-- fix favicon.ico -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for sorting indicators (optional) */
        .sortable-header {
            cursor: pointer;
        }
        .sort-indicator::after {
            content: "";
            display: inline-block;
            margin-left: 0.5rem;
            width: 0;
            height: 0;
            border-style: solid;
        }
        .sort-asc::after {
            border-width: 0 4px 6px 4px;
            border-color: transparent transparent #fff transparent;
        }
        .sort-desc::after {
            border-width: 6px 4px 0 4px;
            border-color: #fff transparent transparent transparent;
        }

        /* Enhanced table styles */
        table {
            border-collapse: collapse;
            width: 100%;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        th {
            background-color: #6b21a8; /* Purple tone */
            color: #ffffff;
            font-weight: bold;
            text-transform: uppercase;
            padding: 12px;
            text-align: left;
            border-bottom: 2px solid #e5e7eb; /* Light gray */
        }

        td {
            padding: 12px;
            border-bottom: 1px solid #e5e7eb; /* Light gray */
            text-align: left;
        }

        tr:nth-child(even) {
            background-color: #f9fafb; /* Light gray */
        }

        tr:hover td {
            background-color: #d1fae5; /* Light green */
            color: #065f46; /* Dark green */
        }

        .sortable-header {
            cursor: pointer;
            position: relative;
        }

        .sortable-header:hover {
            color: #93c5fd; /* Light blue */
        }

        .sort-indicator {
            margin-left: 8px;
        }

        /* Responsive styles */
        @media (max-width: 768px) {
            table {
                display: block;
                overflow-x: auto;
                white-space: nowrap;
            }
            th, td {
                padding: 10px;
                font-size: 14px;
            }
            .container {
                padding: 4px;
            }
            h1 {
                font-size: 24px;
            }
        }

        @media (max-width: 480px) {
            th, td {
                padding: 8px;
                font-size: 12px;
            }
            h1 {
                font-size: 20px;
            }
        }
    </style>
</head>
<body class="bg-gray-100 p-8">

<div class="container mx-auto">
    <h1 class="text-3xl font-bold mb-6 text-gray-800">Machine Inventory</h1>

    <div class="overflow-x-auto bg-white rounded-lg shadow-lg">
        <table id="inventoryTable" class="min-w-full divide-y divide-gray-200">
            <thead class="bg-blue-600 text-white">
                <tr>
                    <th class="sortable-header px-6 py-3 text-left text-xs font-medium uppercase tracking-wider" data-column="Id">
                        Id <span class="sort-indicator" data-dir="none"></span>
                    </th>
                    <th class="sortable-header px-6 py-3 text-left text-xs font-medium uppercase tracking-wider" data-column="Bagging">
                        Bagging <span class="sort-indicator" data-dir="none"></span>
                    </th>
                    <th class="sortable-header px-6 py-3 text-left text-xs font-medium uppercase tracking-wider" data-column="Part machine">
                        Part machine <span class="sort-indicator" data-dir="none"></span>
                    </th>
                    <th class="sortable-header px-6 py-3 text-left text-xs font-medium uppercase tracking-wider" data-column="Specification">
                        Specification <span class="sort-indicator" data-dir="none"></span>
                    </th>
                    <th class="sortable-header px-6 py-3 text-left text-xs font-medium uppercase tracking-wider" data-column="Machine Name">
                        Machine Name <span class="sort-indicator" data-dir="none"></span>
                    </th>
                    <th class="sortable-header px-6 py-3 text-left text-xs font-medium uppercase tracking-wider" data-column="Line">
                        Line <span class="sort-indicator" data-dir="none"></span>
                    </th>
                    <th class="sortable-header px-6 py-3 text-left text-xs font-medium uppercase tracking-wider" data-column="Brand">
                        Brand <span class="sort-indicator" data-dir="none"></span>
                    </th>
                    <th class="sortable-header px-6 py-3 text-left text-xs font-medium uppercase tracking-wider" data-column="Model">
                        Model <span class="sort-indicator" data-dir="none"></span>
                    </th>
                    <th class="sortable-header px-6 py-3 text-left text-xs font-medium uppercase tracking-wider" data-column="Serial No.">
                        Serial No. <span class="sort-indicator" data-dir="none"></span>
                    </th>
                    <th class="sortable-header px-6 py-3 text-left text-xs font-medium uppercase tracking-wider" data-column="Year">
                        Year <span class="sort-indicator" data-dir="none"></span>
                    </th>
                    <th class="sortable-header px-6 py-3 text-left text-xs font-medium uppercase tracking-wider" data-column="Rate capacity">
                        Rate capacity <span class="sort-indicator" data-dir="none"></span>
                    </th>
                    <th class="sortable-header px-6 py-3 text-left text-xs font-medium uppercase tracking-wider" data-column="Accuracy weight">
                        Accuracy weight <span class="sort-indicator" data-dir="none"></span>
                    </th>
                </tr>
            </thead>
            <tbody id="tableBody" class="bg-white divide-y divide-gray-200">
            </tbody>
        </table>
    </div>
</div>

<script>
    const machineData = [
        {
            "Id": "1",
            "Bagging": "PP1&2",
            "Part machine": "Weight scale",
            "Specification": "Machine No.",
            "Machine Name": "30W010A",
            "Line": "A",
            "Brand": "W&H",
            "Model": "D-49525",
            "Serial No.": "W-4908-00106",
            "Year": "2008",
            "Rate capacity": "45 Ton/hr.",
            "Accuracy weight": "± 20 g."
        },
        {
            "Id": "2",
            "Bagging": "PP1&2",
            "Part machine": "Weight scale",
            "Specification": "Machine No.",
            "Machine Name": "30W010C",
            "Line": "C",
            "Brand": "new long",
            "Model": "PS-4100H",
            "Serial No.": "4841 , 4842",
            "Year": "05/2009",
            "Rate capacity": "30 Ton/hr.",
            "Accuracy weight": "± 15 g."
        },
        {
            "Id": "3",
            "Bagging": "PP1&2",
            "Part machine": "Weight scale",
            "Specification": "Machine No.",
            "Machine Name": "30W050A",
            "Line": "A",
            "Brand": "Beumer",
            "Model": "FS-20",
            "Serial No.": "1071",
            "Year": "02/2022",
            "Rate capacity": "20 BAG/hr.",
            "Accuracy weight": "± 15 g."
        },
        {
            "Id": "4",
            "Bagging": "PP1&2",
            "Part machine": "Weight scale",
            "Specification": "Machine No.",
            "Machine Name": "30W050B",
            "Line": "B",
            "Brand": "W&H",
            "Model": "FS-20",
            "Serial No.": "1072",
            "Year": "02/2022",
            "Rate capacity": "20 BAG/hr.",
            "Accuracy weight": "± 15 g."
        },
        {
            "Id": "5",
            "Bagging": "PP1&2",
            "Part machine": "Weight scale",
            "Specification": "Machine No.",
            "Machine Name": "30W050C",
            "Line": "C",
            "Brand": "W&H",
            "Model": "FS-20",
            "Serial No.": "1073",
            "Year": "02/2022",
            "Rate capacity": "20 BAG/hr.",
            "Accuracy weight": "± 15 g."
        },
        {
            "Id": "6",
            "Bagging": "PP1&2",
            "Part machine": "Weight on line",
            "Specification": "Machine No.",
            "Machine Name": "30W011A",
            "Line": "A",
            "Brand": "ISHIDA",
            "Model": "DACS-G-S300-611/PE-N-S",
            "Serial No.": "1.00E+08",
            "Year": "08/2015",
            "Rate capacity": "30,000 g.",
            "Accuracy weight": "± 5 g."
        },
        {
            "Id": "7",
            "Bagging": "PP1&2",
            "Part machine": "Weight on line",
            "Specification": "Machine No.",
            "Machine Name": "30W011C",
            "Line": "C",
            "Brand": "กำลังติดตั้ง",
            "Model": "กำลังติดตั้ง",
            "Serial No.": "กำลังติดตั้ง",
            "Year": "กำลังติดตั้ง",
            "Rate capacity": "กำลังติดตั้ง",
            "Accuracy weight": "กำลังติดตั้ง"
        },
        {
            "Id": "8",
            "Bagging": "PP1&2",
            "Part machine": "Bagging machine",
            "Specification": "Machine No.",
            "Machine Name": "30W010A",
            "Line": "A",
            "Brand": "TOPAS",
            "Model": "D-49516",
            "Serial No.": "7335",
            "Year": "2008",
            "Rate capacity": "45 Ton/hr.",
            "Accuracy weight": "-"
        },
        {
            "Id": "9",
            "Bagging": "PP1&2",
            "Part machine": "Bagging machine",
            "Specification": "Machine No.",
            "Machine Name": "30W010C",
            "Line": "C",
            "Brand": "ASVENTUS",
            "Model": "Topas SF 2000",
            "Serial No.": "E-000205-01-15-01",
            "Year": "2023",
            "Rate capacity": "30 Ton/hr.",
            "Accuracy weight": "-"
        },
        {
            "Id": "10",
            "Bagging": "PP1&2",
            "Part machine": "Palletizer machine",
            "Specification": "Machine No.",
            "Machine Name": "30H010C",
            "Line": "C",
            "Brand": "BEUMER",
            "Model": "Paletpac® KBQ1800",
            "Serial No.": "608-0271",
            "Year": "2008",
            "Rate capacity": "-",
            "Accuracy weight": "805015"
        },
        {
            "Id": "11",
            "Bagging": "PP1&2",
            "Part machine": "Palletizer machine",
            "Specification": "Machine No.",
            "Machine Name": "30H010C",
            "Line": "C",
            "Brand": "NEWLONG",
            "Model": "กำลังติดตั้ง",
            "Serial No.": "กำลังติดตั้ง",
            "Year": "กำลังติดตั้ง",
            "Rate capacity": "กำลังติดตั้ง",
            "Accuracy weight": "กำลังติดตั้ง"
        }
    ];

    const tableBody = document.getElementById('tableBody');
    const headers = document.querySelectorAll('.sortable-header');

    // Function to populate the table
    function populateTable(data) {
        tableBody.innerHTML = ''; // Clear existing rows
        data.forEach((item, index) => {
            const row = document.createElement('tr');
            row.classList.add(index % 2 === 0 ? 'bg-white' : 'bg-gray-50', 'hover:bg-gray-100');
            row.innerHTML = `
                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${item.Id}</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${item.Bagging}</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${item['Part machine']}</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${item.Specification}</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${item['Machine Name']}</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${item.Line}</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${item.Brand}</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${item.Model}</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${item['Serial No.']}</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${item.Year}</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${item['Rate capacity']}</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${item['Accuracy weight']}</td>
            `;
            tableBody.appendChild(row);
        });
    }

    // Initial table population
    populateTable(machineData);

    let currentSortColumn = null;
    let currentSortDirection = 'none';

    // Sort function
    function sortTable(column, direction) {
        const isNumeric = ['Id', 'Year'].includes(column) || column.includes('Rate capacity') || column.includes('Accuracy weight');

        machineData.sort((a, b) => {
            const aValue = a[column];
            const bValue = b[column];

            if (aValue === 'กำลังติดตั้ง' || bValue === 'กำลังติดตั้ง' || aValue === '-' || bValue === '-') {
                return aValue.localeCompare(bValue);
            }

            if (isNumeric) {
                const parseNumeric = (str) => {
                    const match = String(str).match(/[\d\.]+/);
                    return match ? parseFloat(match[0]) : NaN;
                };

                const numA = parseNumeric(aValue);
                const numB = parseNumeric(bValue);

                if (isNaN(numA) && isNaN(numB)) return String(aValue).localeCompare(String(bValue));
                if (isNaN(numA)) return direction === 'asc' ? 1 : -1;
                if (isNaN(numB)) return direction === 'asc' ? -1 : 1;

                return direction === 'asc' ? numA - numB : numB - numA;
            } else {
                const comparison = String(aValue).localeCompare(String(bValue));
                return direction === 'asc' ? comparison : -comparison;
            }
        });

        populateTable(machineData);
    }

    // Event listeners for headers
    headers.forEach(header => {
        header.addEventListener('click', function() {
            const column = this.getAttribute('data-column');
            let direction = this.querySelector('.sort-indicator').getAttribute('data-dir');

            if (currentSortColumn !== column) {
                direction = 'asc';
            } else {
                direction = direction === 'asc' ? 'desc' : (direction === 'desc' ? 'none' : 'asc');
            }

            headers.forEach(h => {
                const indicator = h.querySelector('.sort-indicator');
                indicator.classList.remove('sort-asc', 'sort-desc');
                indicator.setAttribute('data-dir', 'none');
            });

            const indicator = this.querySelector('.sort-indicator');
            indicator.setAttribute('data-dir', direction);

            if (direction === 'asc') {
                indicator.classList.add('sort-asc');
            } else if (direction === 'desc') {
                indicator.classList.add('sort-desc');
            }

            currentSortColumn = column;
            currentSortDirection = direction;

            if (direction !== 'none') {
                sortTable(column, direction);
            } else {
                machineData.sort((a, b) => parseInt(a.Id) - parseInt(b.Id));
                populateTable(machineData);
            }
        });
    });

    // Add touch event listener for iPad and other touch devices
    const rows = document.querySelectorAll('#inventoryTable tbody tr');

    rows.forEach(row => {
        row.addEventListener('touchstart', () => {
            // Remove highlight from all rows
            rows.forEach(r => r.classList.remove('bg-green-200'));

            // Add highlight to the touched row
            row.classList.add('bg-green-200');
        });
    });
</script>

</body>
</html>